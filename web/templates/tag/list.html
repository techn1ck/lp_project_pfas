{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block title %}Теги{% endblock %}

{% block app_content %}
<h1>Теги</h1>
<div class="col-md-4">
    {{ wtf.quick_form(form, extra_classes="monospace") }}
</div>
<div class="col-md-8">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Описание</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% if tags is iterable %}
                {% for tag in tags %}
                    <tr>
                        <th>{{ tag.id }}</th>
                        <td>{{ tag.name }}</td>
                        <td>{{ tag.description }}</td>
                        <td>
                            <a href="?id={{ tag.id }}">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            </a>
                            
                            {% if tag.operations %}
                                {% set confirm_text = 'Данный Тег используется в ' + tag.operations|length|string + ' операциях. При удалении, он будет удален из этих операций' %}
                            {% else %}
                                {% set confirm_text = '' %}
                            {% endif %}
                            <a onclick="return confirm('Удалить? {{ confirm_text }}')" href="?action=delete&id={{ tag.id }}">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </a>
                            
                            {% if tag.is_actual %}
                            <a onclick="return confirm('Скрыть элемент?')" href="?action=switch&id={{ tag.id }}">
                                <span class="glyphicon glyphicon-check" aria-hidden="true">Актуально</span>
                            </a>
                            {% else %}
                            <a onclick="return confirm('Показать элемент?')" href="?action=switch&id={{ tag.id }}">
                                <span class="glyphicon glyphicon-unchecked" aria-hidden="true">Скрыто</span>
                            </a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="7">У вас нет тегов</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}

